var timeData=[];var powerData=[];var carbonData=[];
var $jscomp = {
    scope: {},
    findInternal: function (a, b, c) { 
        a instanceof String && (a = String(a));
         for (var d = a.length, e = 0; e < d; e++) { 
             var f = a[e]; 
             if (b.call(c, f, e, a)) 
                return { i: e, v: f } 
            } 
            return { i: -1, v: void 0 }
         } 
        }; 
$jscomp.defineProperty = "function" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) { if (c.get || c.set) throw new TypeError("ES3 does not support getters and setters."); a != Array.prototype && a != Object.prototype && (a[b] = c.value) };
$jscomp.getGlobal = function (a) {
     return "undefined" != typeof window && window === a ? a : "undefined" != typeof global ? global : a 
    };
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.polyfill = function (a, b, c, d) { 
    if (b) { 
        c = $jscomp.global; 
        a = a.split("."); 
        for (d = 0; d < a.length - 1; d++) { 
            var e = a[d]; 
            e in c || (c[e] = {});
            c = c[e] 
        } 
        a = a[a.length - 1]; 
        d = c[a]; 
        b = b(d); 
        b != d && null != b && $jscomp.defineProperty(c, a, { configurable: !0, writable: !0, value: b }) 
    } 
};
$jscomp.polyfill("Array.prototype.find", function (a) { 
    return a ? a : function (a, c) { 
        return $jscomp.findInternal(this, a, c).v } }, "es6-impl", "es3"
    );
var DemoMin = function () {
    this.basic = new Basic("basic-main-content"); 
    this.expend = new Expend("expend-main-content"); 
    this.statistics = new Statistics("statistics-main-content"); 
    this.type = new Type("type-main-content"); 
    this.combo = new Combo("combo-main-content", "combo-main-echarts");
    this.load = function () {
        this.type.load();
    }
    this.init = function () {
        $.ajax({
            url:"/test/data",
            dataType:"json",
            async:false,
            success:function(data){
                $(data).each(function(){
                    timeData.push(this.date);
                    powerData.push(this.a);
                    carbonData.push(this.b);
                })
            }
        })
        this.basic.render(); 
        this.type.render(); this.expend.render(); 
        this.statistics.render(); 
        this.combo.render(); 
        return this 
    } 
},
Basic = function (a) {
    this.elem = a; 
    this.data = function () { 
        return '{"tooltip":{"formatter":"{a} <br/>{b} : {c}%"},"series":[{"name":"\u4e1a\u52a1\u6307\u6807","type":"gauge","detail":{"formatter":"{value}%","width":"90","height":"60"},"center":["50%","70%"],"radius":"120%","startAngle":180,"endAngle":0,"data":[{"value":50,"name":"\u5b8c\u6210\u7387"}]}]}' };
    this.render = function () { 
        $("#" + this.elem).height(800);
        // this.chart = echarts.init(document.getElementById(a));
        // this.chart.setOption(JSON.parse(this.data()))
    }
}, Expend = function (a) {
    this.elem = a; this.data = function () { 
        return "<table width='100%' class='am-table am-table-bd am-table-bdrs am-table-striped am-table-hover am-text-xs'><thead><tr><th>\u9879\u76ee</th><th>\u72b6\u6001</th><th>\u53d1\u751f\u65f6\u95f4</th></tr></thead><tbody><tr><td>\u573a\u666fA</td><td><span class='am-badge am-badge-danger'>\u5931\u8d25</span></td><td>2016-08-25</td></tr></tr></thead><tbody><tr><td>\u573a\u666fB</td><td><span class='am-badge am-badge-success'>\u6210\u529f</span></td><td>2016-08-25</td></tr></tr></thead><tbody><tr><td>\u573a\u666fC</td><td><span class='am-badge am-badge-success'>\u6210\u529f</span></td><td>2016-08-25</td></tr></tbody></table>" };
    this.render = function () { 
        $("#" + this.elem).append(this.data()) 
    }
}, Statistics = function (a) {
    this.elem = a; 
    this.data = function () { 
        return "<table width='100%' class='am-table am-table-bd am-table-bdrs am-table-striped am-table-hover am-text-xs'><thead><tr><th>\u9879\u76ee</th><th>\u7edf\u8ba1\u7ed3\u679c</th><th>\u622a\u6b62\u65f6\u95f4</th></tr></thead><tbody><tr><td>\u573a\u666fA</td><td><span class='am-badge am-badge-default'>10</span></td><td>2016-08-25</td></tr></tr></thead><tbody><tr><td>\u573a\u666fB</td><td><span class='am-badge am-badge-primary'>30</span></td><td>2016-08-25</td></tr></tr></thead><tbody><tr><td>\u573a\u666fC</td><td><span class='am-badge am-badge-warning'>300</span></td><td>2016-08-25</td></tr></tbody></table>" };
    this.render = function () { 
        $("#" + this.elem).append(this.data()) 
    }
}, Type = function (a) {
    this.elem = a;

    // var timeData = [
    //     '10/17', '10/18', '10/19', '10/20', '10/21',
    //     '10/23',
    //     '10/24','10/25','10/26','10/27'
    // ];
    option = {
        title: {
            text: '光伏发电节碳图',
            subtext: '数据来自西门子SCPS工厂',
            x: 'center'
        },
        tooltip:{},
        legend: {
            data:['发电','节碳'],
            x: 'left'
        },
        color:['#c23531','#5eb95e'],
        toolbox: {
            feature: {
                dataZoom: {
                    yAxisIndex: 'none'
                },
                restore: {},
                saveAsImage: {}
            }
        },
        // dataZoom: [
        //     {
        //         show: true,
        //         realtime: true,
        //         start: 30,
        //         end: 100,
        //         xAxisIndex: [0, 1]
        //     },
        //     {
        //         type: 'inside',
        //         realtime: true,
        //         start: 30,
        //         end: 100,
        //         xAxisIndex: [0, 1]
        //     }
        // ],
        grid: [{
            left: 50,
            right: 50,
            height: '35%'
        }, {
            left: 50,
            right: 50,
            top: '55%',
            height: '35%'
        }],
        xAxis : [
            {
                axisLine: {onZero: true},
                // offset  :   -200,
                data: timeData
            },
            {
                show :false,
                gridIndex: 1,
                axisLine: {onZero: true},
                data: timeData,
                position: 'top'
            }
        ],
        yAxis : [
            {
                name : '发电(kwh)',
                type : 'value',
                max : 1000
            },
            {
                gridIndex: 1,
                nameGap:5,//y轴名字与轴线距离
                name : '节碳(kg)',
                type : 'value',
                inverse: true
            }
        ],
        series : [
            {
                name:'发电',
                barWidth:'40%',
                type:'bar',
                symbolSize: 8,
                hoverAnimation: false,
                data:powerData
            },
            {
                name:'节碳',
                barWidth:'40%',
                type:'bar',
                xAxisIndex: 1,
                yAxisIndex: 1,
                symbolSize: 8,
                hoverAnimation: false,
                data: carbonData
            }
        ]
    };
    this.render = function () {
        $("#" + this.elem).height(430);//395
        this.chart = echarts.init(document.getElementById(a)); 
        this.chart.setOption(option) 
    };
    this.load = function () {
        this.chart.setOption(option)
    }
}, Combo = function (a, b) {
    this.elem = b; this.content = a; this.data = function () {
        return {
            options: '{"title":{"text":"\u67d0\u7ad9\u70b9\u7528\u6237\u8bbf\u95ee\u6765\u6e90","subtext":"\u7eaf\u5c5e\u865a\u6784","x":"center"},"tooltip":{"trigger":"item","formatter":"{a} <br/>{b} : {c} ({d}%)"},"legend":{"orient":"vertical","left":"left","data":["\u76f4\u63a5\u8bbf\u95ee","\u90ae\u4ef6\u8425\u9500","\u8054\u76df\u5e7f\u544a","\u89c6\u9891\u5e7f\u544a","\u641c\u7d22\u5f15\u64ce"]},"series":[{"name":"\u8bbf\u95ee\u6765\u6e90","type":"pie","radius":"55%","center":["50%","60%"],"data":[{"value":335,"name":"\u76f4\u63a5\u8bbf\u95ee"},{"value":310,"name":"\u90ae\u4ef6\u8425\u9500"},{"value":234,"name":"\u8054\u76df\u5e7f\u544a"},{"value":135,"name":"\u89c6\u9891\u5e7f\u544a"},{"value":1548,"name":"\u641c\u7d22\u5f15\u64ce"}],"itemstyle":{"emphasis":{"shadowblur":10,"shadowoffsetx":0,"shadowcolor":"rgba(0, 0, 0, 0.5)"}}}]}',
            tables: "<table width='100%' class='am-table am-table-bd am-table-bdrs am-table-striped am-table-hover'><thead><tr><th>\u9879\u76ee</th><th>\u7edf\u8ba1\u7ed3\u679c</th><th>\u622a\u6b62\u65f6\u95f4</th></tr></thead><tbody><tr><td>\u76f4\u63a5\u8bbf\u95ee</td><td><span class='am-badge am-badge-default'>10</span></td><td>2016-08-25</td></tr><tr><td>\u90ae\u4ef6\u8425\u9500</td><td><span class='am-badge am-badge-primary'>30</span></td><td>2016-08-25</td></tr><tr><td>\u8054\u76df\u5e7f\u544a</td><td><span class='am-badge am-badge-warning'>300</span></td><td>2016-08-25</td></tr><tr><td>\u89c6\u9891\u5e7f\u544a</td><td><span class='am-badge am-badge-warning'>135</span></td><td>2016-08-25</td></tr><tr><td>\u641c\u7d22\u5f15\u64ce</td><td><span class='am-badge am-badge-danger'>1548</span></td><td>2016-08-25</td></tr></tbody></table>"
        }
    };
    this.render = function () { $("#" + this.elem).height(600); var a = this.data(); $("#" + this.content).append(a.tables); this.chart = echarts.init(document.getElementById(b)); this.chart.setOption(JSON.parse(a.options)) }
}, Details = function (a, b) {
    this.elem = b; this.content = a; this.data = function () {
        var a = {}; a.option = {
            backgroundColor: "#404a59", title: { text: "\u5168\u56fd\u9500\u91cf\u5206\u5e03", subtext: "data from xxx\u7cfb\u7edf", sublink: "http://www.163.com", left: "center", textStyle: { color: "#fff" } }, tooltip: { trigger: "item" },
            legend: { orient: "vertical", y: "bottom", x: "right", data: ["xxx"], textStyle: { color: "#fff" } }, geo: { map: "china", label: { emphasis: { show: !1 } }, roam: !0, itemStyle: { normal: { areaColor: "#323c48", borderColor: "#111" }, emphasis: { areaColor: "#2a333d" } } }, series: [{ name: "xxx", type: "scatter", coordinateSystem: "geo", data: mapData, symbolSize: function (a) { return a[2] / 10 }, label: { normal: { formatter: "{b}", position: "right", show: !1 }, emphasis: { show: !0 } }, itemStyle: { normal: { color: "#ddb926" } } }, {
                name: "Top 10", type: "effectScatter", coordinateSystem: "geo",
                data: valueData, symbolSize: function (a) { return a[2] / 10 }, showEffectOn: "render", rippleEffect: { brushType: "stroke" }, hoverAnimation: !0, label: { normal: { formatter: "{b}", position: "right", show: !0 } }, itemStyle: { normal: { color: "#f4e925", shadowBlur: 10, shadowColor: "#333" } }, zlevel: 1
            }]
        }; a.tables = "<table width='100%' class='am-table am-table-bd am-table-bdrs am-table-striped am-table-hover'><tr><td>\u5f00\u59cb\u65f6\u95f4</td><td>2016-08-30 09:00</td><td>\u7ed3\u675f\u65f6\u95f4</td><td>2016-09-30 21:00</td></tr><tr><td>\u6700\u5927\u503c</td><td><span class='am-badge am-badge-primary'>1000</span></td><td>\u6700\u5c0f\u503c</td><td><span class='am-badge am-badge-default'>5</span></td></tr><tr><td>\u5e73\u5747\u503c</td><td><span class='am-badge am-badge-secondary'>100</span></td><td>\u603b\u8ba1</td><td><span class='am-badge am-badge-success'>2000</span></td></tr></table>";
        return a
    }; this.render = function () { $("#" + this.elem).height(800); var a = this.data(); $("#" + this.content).append(a.tables); this.chart = echarts.init(document.getElementById(b)); this.chart.setOption(a.option) }
}, data = [{ name: "\u5927\u5e86", value: 279 }], geoCoordMap = {
    "\u5927\u5e86": [125.03, 46.58]
}, convertData = function (a) { 
    for (var b = [], c = 0; c < a.length; c++) { 
        var d = geoCoordMap[a[c].name]; 
        d && b.push({ name: a[c].name, value: d.concat(a[c].value) }) 
    } 
    return b 
}, 
mapData = convertData(data), 
valueData = convertData(data.sort(function (a, b) { return b.value - a.value })).slice(0, 11); 
Box.Application.addModule(
    "topbarcollapse", 
    function (a) { 
        function b() {
             $(c).find("li a").removeClass("am-active") 
            } var c; 
            return { 
                init: function () {
                     c = a.getElement() 
                    }, 
                destroy: function () {
                     c = null 
                    }, 
                onclick: function (c, e, f) {
                     switch (f) { 
                         case "fisrt": b(); 
                            $(e).addClass("am-active"); 
                            a.broadcast("firstOpen"); 
                            a.broadcast("secondClose"); 
                            break; 
                        case "second": b(), $(e).addClass("am-active"), a.broadcast("firstClose"), a.broadcast("secondOpen") 
                    } 
                } 
            } 
        }); 
Box.Application.addModule("firstlevel", function (a) {
    var b;
    return {
        init: function () {
            b = a.getElement();
            (new DemoMin).init()
        },
        destroy: function () { b = null },
        onclick: function (a, b, e) { },
        onchange: function (a, b, e) { },
        onmessage: {
            firstOpen: function () {
                $(b).hasClass("am-hide") && $(b).removeClass("am-hide")
            },
            firstClose: function () {
                $(b).hasClass("am-hide") || $(b).addClass("am-hide")
            }
        }
    }
});
Box.Application.addModule("secondlevel", function (a) {
    var b, c, d = -1;
    return {
        init: function () {
            b = a.getElement();
            c = new Details("detail-main-content", "detail-main-echarts")
        },
        destroy: function () {b = c = null },
        onclick: function (a, b, c) { },
        onchange: function (a, b, c) { },
        onmessage: {
            secondOpen: function () {
                $(b).hasClass("am-hide") && ($(b).removeClass("am-hide"), -1 == d && c.render(), d++)
            },
            secondClose: function () {
                $(b).hasClass("am-hide") || $(b).addClass("am-hide")
            }
        }
    }
});
(function (a, b) {
    "function" === typeof define && define.amd ? define(["exports", "echarts"], b) : "object" === typeof exports && "string" !== typeof exports.nodeName ? b(exports, require("echarts")) : b({}, a.echarts)
})
(this, function (a, b) {
    var c = function (a) { "undefined" !== typeof console && console && console.error && console.error(a) }; b ? b.registerMap ? b.registerMap("china", {
        type: "FeatureCollection", features: [{
            id: "710000", geometry: {
                type: "MultiPolygon", coordinates: [["@@\u00b0\u00dc\u00af\u00db", "@@\u019b\u0134\u00d5\u018a\u00c9\u027c\u0123\u00ba\u00f0\u0280\\\u018es\u00c6N\u014c\u00d4\u011a\u00e4\u009cn\u00dc\u01a4\u024a\u0102\u01c0\u0106\u0134\u009e\u0124\u01ca\u0168x\u011a\u012e\u01c2\u01ba\u00f2\u018c\u0082\u0096\u00e2\u00d4\u00ae\u012eX\u0166\u0163\u01b8\u007fZ\u00fb\u00d0\u008b\u0195\u0191G\u0111\u00a8\u012dM\u00f3\u00b7\u0119c\u00eb\u019d\u0249l\u00dd\u01af\u05b9\u00c5\u0143^\u00d3\u00b7\u008f\u009d\u015b\u0143\u01cb\u018f\u010f\u008d\u00ed\u00e5\u025bG\u0249\u0099\u00bfI\u010b\u00e3\u0090\u00e3F\u00a5\u0118W\u01ec\u00cf\u0136\u00f1\u00c4",
                    "@@\\p|WoYG\u00bf\u00a5I\u0086j@\u009e", "@@\u0085\u00a1\u0089@\u0081\u0088V^Rq\u0088B\u0081bA\u008cnTXe\u0084\u0086\u009eQr\u0099\u00a9C", "@@\u00c6EE\u0097\u0084kWq\u00eb\u00a0I\u009c"]], encodeOffsets: [[[122886, 24033], [123335, 22980], [122375, 24193], [122518, 24117], [124427, 22618]]]
            }, properties: { cp: [121.509062, 25.044332], name: "\u53f0\u6e7e", childNum: 5 }
        }], UTF8Encoding: !0
    }) : c("ECharts Map is not loaded") : c("ECharts is not Loaded")
});
